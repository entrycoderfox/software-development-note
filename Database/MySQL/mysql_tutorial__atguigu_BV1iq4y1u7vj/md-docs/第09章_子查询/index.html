
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="entrycoder的软件开发记事本">
      
      
        <meta name="author" content="entrycoder">
      
      
      
        <link rel="prev" href="../%E7%AC%AC08%E7%AB%A0_%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0/">
      
      
        <link rel="next" href="../%E7%AC%AC10%E7%AB%A0_%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86%E8%A1%A8/">
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.15">
    
    
      
        <title>第09章_子查询 - entrycoder的软件开发记事本</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.113286f1.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../mkdocs/css/no-footer.css">
    
      <link rel="stylesheet" href="../../../../../mkdocs/css/unordered-list-symbols.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#09-_" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../.." title="entrycoder的软件开发记事本" class="md-header__button md-logo" aria-label="entrycoder的软件开发记事本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            entrycoder的软件开发记事本
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第09章_子查询
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../Environment/" class="md-tabs__link">
        系统环境
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../" class="md-tabs__link md-tabs__link--active">
        数据库
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        关于
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="entrycoder的软件开发记事本" class="md-nav__button md-logo" aria-label="entrycoder的软件开发记事本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    entrycoder的软件开发记事本
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../Environment/">系统环境</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          系统环境
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
          前端
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          前端
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Environment/front_end/vue_on_kylin/" class="md-nav__link">
        在Kylin上安装VUE-CLI等
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../">数据库</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          数据库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          RDBMS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          RDBMS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" checked>
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
          MySQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          MySQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_1" checked>
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_1_1" id="__nav_2_2_1_1_label" tabindex="0">
          MySQ教程 尚硅谷
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          MySQ教程 尚硅谷
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%BD%9C%E8%80%85%E7%9A%84%E8%AF%9D/" class="md-nav__link">
        作者的话
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%BF%AE%E6%94%B9%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        修改记录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%9B%AE%E5%BD%95/" class="md-nav__link">
        目录
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_1_4" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_1_1_4" id="__nav_2_2_1_1_4_label" tabindex="0">
          文档-基础篇
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_2_1_1_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2_1_1_4">
          <span class="md-nav__icon md-icon"></span>
          文档-基础篇
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC00%E7%AB%A0_%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/" class="md-nav__link">
        第00章_写在前面
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC01%E7%AB%A0_%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        第01章_数据库概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC02%E7%AB%A0_MySQL%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        第02章_MySQL环境搭建
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC03%E7%AB%A0_%E5%9F%BA%E6%9C%AC%E7%9A%84SELECT%E8%AF%AD%E5%8F%A5/" class="md-nav__link">
        第03章_基本的SELECT语句
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC04%E7%AB%A0_%E8%BF%90%E7%AE%97%E7%AC%A6/" class="md-nav__link">
        第04章_运算符
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC05%E7%AB%A0_%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%88%86%E9%A1%B5/" class="md-nav__link">
        第05章_排序与分页
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC06%E7%AB%A0_%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/" class="md-nav__link">
        第06章_多表查询
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC07%E7%AB%A0_%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0/" class="md-nav__link">
        第07章_单行函数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC08%E7%AB%A0_%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0/" class="md-nav__link">
        第08章_聚合函数
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          第09章_子查询
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        第09章_子查询
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    讲师：尚硅谷-宋红康（江湖人称：康师傅）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#httpwwwatguigucom" class="md-nav__link">
    官网： http://www.atguigu.com
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mysql-4-1" class="md-nav__link">
    子查询指一个查询语句嵌套在另一个查询语句内部的查询，这个特性从MySQL 4. 1 开始引入。
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-select" class="md-nav__link">
    SQL 中子查询的使用大大增强了 SELECT 查询的能力，因为很多时候查询需要从结果集中获取数据，或者
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    需要从同一个表中先计算得出一个数据结果，然后与这个数据结果（可能是某个标量，也可能是某个集
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    合）进行比较。
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1. 需求分析与问题解决
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-1" class="md-nav__link">
    1. 1 实际问题
  </a>
  
    <nav class="md-nav" aria-label="1. 1 实际问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    现有解决方式：
  </a>
  
    <nav class="md-nav" aria-label="现有解决方式：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    #方式一：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    #方式二：自连接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-2" class="md-nav__link">
    1. 2 子查询的基本使用
  </a>
  
    <nav class="md-nav" aria-label="1. 2 子查询的基本使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    子查询的基本语法结构：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    子查询（内查询）在主查询之前一次执行完成。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    子查询的结果被主查询（外查询）使用 。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    注意事项
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    子查询要包含在括号内
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    将子查询放在比较条件的右侧
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    单行操作符对应单行子查询，多行操作符对应多行子查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-3" class="md-nav__link">
    1. 3 子查询的分类
  </a>
  
    <nav class="md-nav" aria-label="1. 3 子查询的分类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    分类方式 1 ：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    我们按内查询的结果返回一条还是多条记录，将子查询分为单行子查询、多行子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    单行子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    多行子查询
  </a>
  
    <nav class="md-nav" aria-label="多行子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    #方式三：子查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    操作符 含义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#equal-to" class="md-nav__link">
    = equal to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#greater-than" class="md-nav__link">
    &gt; greater than
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#greater-than-or-equal-to" class="md-nav__link">
    &gt;= greater than or equal to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#less-than" class="md-nav__link">
    &lt; less than
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#less-than-or-equal-to" class="md-nav__link">
    &lt;= less than or equal to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-equal-to" class="md-nav__link">
    &lt;&gt; not equal to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    分类方式 2 ：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    我们按内查询是否被执行多次，将子查询划分为相关(或关联)子查询和不相关(或非关联)子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    子查询从数据表中查询了数据结果，如果这个数据结果只执行一次，然后这个数据结果作为主查询的条
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    件进行执行，那么这样的子查询叫做不相关子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    同样，如果子查询需要执行多次，即采用循环的方式，先从外部查询开始，每次都传入子查询进行查
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    询，然后再将结果反馈给外部，这种嵌套的执行方式就称为相关子查询。
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    2. 单行子查询
  </a>
  
    <nav class="md-nav" aria-label="2. 单行子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2-1" class="md-nav__link">
    2. 1 单行比较操作符
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-2" class="md-nav__link">
    2. 2 代码示例
  </a>
  
    <nav class="md-nav" aria-label="2. 2 代码示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#149" class="md-nav__link">
    题目：查询工资大于 149 号员工工资的员工的信息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job_id-141-salary-143-job_id" class="md-nav__link">
    题目：返回job_id与 141 号员工相同，salary比 143 号员工多的员工姓名，job_id和工资
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#last_namejob_idsalary" class="md-nav__link">
    题目：返回公司工资最少的员工的last_name,job_id和salary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#141-174-manager_iddepartment_idemployee_id" class="md-nav__link">
    题目：查询与 141 号或 174 号员工的manager_id和department_id相同的其他员工的employee_id，
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manager_iddepartment_id" class="md-nav__link">
    manager_id，department_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    实现方式 1 ：不成对比较
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    实现方式 2 ：成对比较
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-3-having" class="md-nav__link">
    2. 3 HAVING 中的子查询
  </a>
  
    <nav class="md-nav" aria-label="2. 3 HAVING 中的子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    首先执行子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#having" class="md-nav__link">
    向主查询中的HAVING 子句返回结果。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#50-id" class="md-nav__link">
    题目：查询最低工资大于 50 号部门最低工资的部门id和其最低工资
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-4-case" class="md-nav__link">
    2. 4 CASE中的子查询
  </a>
  
    <nav class="md-nav" aria-label="2. 4 CASE中的子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case" class="md-nav__link">
    在CASE表达式中使用单列子查询：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employee_idlast_namelocationdepartment_idlocation_id-1800" class="md-nav__link">
    题目：显式员工的employee_id,last_name和location。其中，若员工department_id与location_id为 1800
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#department_idlocationcanadausa" class="md-nav__link">
    的department_id相同，则location为’Canada’，其余则为’USA’。
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-5" class="md-nav__link">
    2. 5 子查询中的空值问题
  </a>
  
    <nav class="md-nav" aria-label="2. 5 子查询中的空值问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    子查询不返回任何行
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-5_1" class="md-nav__link">
    2. 5 非法使用子查询
  </a>
  
    <nav class="md-nav" aria-label="2. 5 非法使用子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    操作符 含义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in" class="md-nav__link">
    IN 等于列表中的 任意一个
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#any" class="md-nav__link">
    ANY 需要和单行比较操作符一起使用，和子查询返回的 某一个 值比较
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all" class="md-nav__link">
    ALL 需要和单行比较操作符一起使用，和子查询返回的 所有 值比较
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#some-anyany" class="md-nav__link">
    SOME 实际上是ANY的别名，作用相同，一般常使用ANY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    多行子查询使用单行比较符
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3. 多行子查询
  </a>
  
    <nav class="md-nav" aria-label="3. 多行子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    也称为集合比较子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    内查询返回多行
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    使用多行比较操作符
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-1" class="md-nav__link">
    3. 1 多行比较操作符
  </a>
  
    <nav class="md-nav" aria-label="3. 1 多行比较操作符">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#any-all" class="md-nav__link">
    体会 ANY 和 ALL 的区别
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-2" class="md-nav__link">
    3. 2 代码示例
  </a>
  
    <nav class="md-nav" aria-label="3. 2 代码示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job_idjob_idit_progjob_id-salary" class="md-nav__link">
    题目：返回其它job_id中比job_id为‘IT_PROG’部门任一工资低的员工的员工号、姓名、job_id 以及salary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job_idjob_idit_progjob_id" class="md-nav__link">
    题目：返回其它job_id中比job_id为‘IT_PROG’部门所有工资都低的员工的员工号、姓名、job_id以及
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#salary" class="md-nav__link">
    salary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    题目：查询平均工资最低的部门id
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-3" class="md-nav__link">
    3. 3 空值问题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4. 相关子查询
  </a>
  
    <nav class="md-nav" aria-label="4. 相关子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    #方式 1 ：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_3" class="md-nav__link">
    #方式 2 ：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-1" class="md-nav__link">
    4. 1 相关子查询执行流程
  </a>
  
    <nav class="md-nav" aria-label="4. 1 相关子查询执行流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    如果子查询的执行依赖于外部查询，通常情况下都是因为子查询中的表用到了外部的表，并进行了条件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    关联，因此每执行一次外部查询，子查询都要重新计算一次，这样的子查询就称之为关联子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    相关子查询按照一行接一行的顺序执行，主查询的每一行都执行一次子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    说明： 子查询中使用主查询中的列
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-2" class="md-nav__link">
    4. 2 代码示例
  </a>
  
    <nav class="md-nav" aria-label="4. 2 代码示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#last_namesalarydepartment_id" class="md-nav__link">
    题目：查询员工中工资大于本部门平均工资的员工的last_name,salary和其department_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    方式一：相关子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from" class="md-nav__link">
    方式二：在 FROM 中使用子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fromfrom" class="md-nav__link">
    from型的子查询：子查询是作为from的一部分，子查询要用()引起来，并且要给这个子查询取别
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    名， 把它当成一张“临时的虚拟的表”来使用。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#order-by" class="md-nav__link">
    在ORDER BY 中使用子查询：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idsalarydepartment_name" class="md-nav__link">
    题目：查询员工的id,salary,按照department_name 排序
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employeesemployee_idjob_historyemployee_id-2" class="md-nav__link">
    题目：若employees表中employee_id与job_history表中employee_id相同的数目不小于 2 ，输出这些相同
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idemployee_idlast_namejob_id" class="md-nav__link">
    id的员工的employee_id,last_name和其job_id
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-3-exists-not-exists" class="md-nav__link">
    4. 3 EXISTS 与 NOT EXISTS关键字
  </a>
  
    <nav class="md-nav" aria-label="4. 3 EXISTS 与 NOT EXISTS关键字">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exists" class="md-nav__link">
    关联子查询通常也会和 EXISTS操作符一起来使用，用来检查在子查询中是否存在满足条件的行。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    如果在子查询中不存在满足条件的行：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#false" class="md-nav__link">
    条件返回 FALSE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    继续在子查询中查找
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    如果在子查询中存在满足条件的行：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    不在子查询中继续查找
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#true" class="md-nav__link">
    条件返回 TRUE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-existstruefalse" class="md-nav__link">
    NOT EXISTS关键字表示如果不存在某种条件，则返回TRUE，否则返回FALSE。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employee_idlast_namejob_iddepartment_id" class="md-nav__link">
    题目：查询公司管理者的employee_id，last_name，job_id，department_id信息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    方式一：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    方式二：自连接
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    方式三：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#departmentsemployeesdepartment_iddepartment_name" class="md-nav__link">
    题目：查询departments表中，不存在于employees表中的部门的department_id和department_name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-4" class="md-nav__link">
    4. 4 相关更新
  </a>
  
    <nav class="md-nav" aria-label="4. 4 相关更新">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    使用相关子查询依据一个表中的数据更新另一个表的数据。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employeesdepartment_name" class="md-nav__link">
    题目：在employees中增加一个department_name字段，数据为员工对应的部门名称
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-4_1" class="md-nav__link">
    4. 4 相关删除
  </a>
  
    <nav class="md-nav" aria-label="4. 4 相关删除">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    使用相关子查询依据一个表中的数据删除另一个表的数据。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employeesemp_history" class="md-nav__link">
    题目：删除表employees中，其与emp_history表皆有的数据
  </a>
  
    <nav class="md-nav" aria-label="题目：删除表employees中，其与emp_history表皆有的数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    );
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_4" class="md-nav__link">
    # 1）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_4" class="md-nav__link">
    # 2）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5. 抛一个思考题
  </a>
  
    <nav class="md-nav" aria-label="5. 抛一个思考题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#abel" class="md-nav__link">
    问题： 谁的工资比Abel的高？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    解答：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    问题： 以上两种方式有好坏之分吗？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    解答： 自连接方式好！
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbms" class="md-nav__link">
    题目中可以使用子查询，也可以使用自连接。一般情况建议你使用自连接，因为在许多 DBMS 的处理过
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    程中，对于自连接的处理速度要比子查询快得多。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    可以这样理解：子查询实际上是通过未知表进行查询后的条件判断，而自连接是通过已知的自身数据表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbms_1" class="md-nav__link">
    进行条件判断，因此在大部分 DBMS 中都对自连接处理进行了优化。
  </a>
  
    <nav class="md-nav" aria-label="进行条件判断，因此在大部分 DBMS 中都对自连接处理进行了优化。">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_5" class="md-nav__link">
    #方式 1 ：自连接
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_5" class="md-nav__link">
    #方式 2 ：子查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC10%E7%AB%A0_%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86%E8%A1%A8/" class="md-nav__link">
        第10章_创建和管理表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC11%E7%AB%A0_%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B9%8B%E5%A2%9E%E5%88%A0%E6%94%B9/" class="md-nav__link">
        第11章_数据处理之增删改
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC12%E7%AB%A0_MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%B2%BE%E8%AE%B2/" class="md-nav__link">
        第12章_MySQL数据类型精讲
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC13%E7%AB%A0_%E7%BA%A6%E6%9D%9F/" class="md-nav__link">
        第13章_约束
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC14%E7%AB%A0_%E8%A7%86%E5%9B%BE/" class="md-nav__link">
        第14章_视图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC15%E7%AB%A0_%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%87%BD%E6%95%B0/" class="md-nav__link">
        第15章_存储过程与函数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC16%E7%AB%A0_%E5%8F%98%E9%87%8F%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B8%8E%E6%B8%B8%E6%A0%87/" class="md-nav__link">
        第16章_变量、流程控制与游标
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC17%E7%AB%A0_%E8%A7%A6%E5%8F%91%E5%99%A8/" class="md-nav__link">
        第17章_触发器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC18%E7%AB%A0_MySQL8%E5%85%B6%E5%AE%83%E6%96%B0%E7%89%B9%E6%80%A7/" class="md-nav__link">
        第18章_MySQL8其它新特性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%AC%AC19%E7%AB%A0_%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E/" class="md-nav__link">
        第19章_写在最后
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../..">关于</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          关于
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    讲师：尚硅谷-宋红康（江湖人称：康师傅）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#httpwwwatguigucom" class="md-nav__link">
    官网： http://www.atguigu.com
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mysql-4-1" class="md-nav__link">
    子查询指一个查询语句嵌套在另一个查询语句内部的查询，这个特性从MySQL 4. 1 开始引入。
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-select" class="md-nav__link">
    SQL 中子查询的使用大大增强了 SELECT 查询的能力，因为很多时候查询需要从结果集中获取数据，或者
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    需要从同一个表中先计算得出一个数据结果，然后与这个数据结果（可能是某个标量，也可能是某个集
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    合）进行比较。
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1. 需求分析与问题解决
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-1" class="md-nav__link">
    1. 1 实际问题
  </a>
  
    <nav class="md-nav" aria-label="1. 1 实际问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    现有解决方式：
  </a>
  
    <nav class="md-nav" aria-label="现有解决方式：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    #方式一：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    #方式二：自连接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-2" class="md-nav__link">
    1. 2 子查询的基本使用
  </a>
  
    <nav class="md-nav" aria-label="1. 2 子查询的基本使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    子查询的基本语法结构：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    子查询（内查询）在主查询之前一次执行完成。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    子查询的结果被主查询（外查询）使用 。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    注意事项
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    子查询要包含在括号内
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    将子查询放在比较条件的右侧
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    单行操作符对应单行子查询，多行操作符对应多行子查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-3" class="md-nav__link">
    1. 3 子查询的分类
  </a>
  
    <nav class="md-nav" aria-label="1. 3 子查询的分类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    分类方式 1 ：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    我们按内查询的结果返回一条还是多条记录，将子查询分为单行子查询、多行子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    单行子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    多行子查询
  </a>
  
    <nav class="md-nav" aria-label="多行子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    #方式三：子查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    操作符 含义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#equal-to" class="md-nav__link">
    = equal to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#greater-than" class="md-nav__link">
    &gt; greater than
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#greater-than-or-equal-to" class="md-nav__link">
    &gt;= greater than or equal to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#less-than" class="md-nav__link">
    &lt; less than
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#less-than-or-equal-to" class="md-nav__link">
    &lt;= less than or equal to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-equal-to" class="md-nav__link">
    &lt;&gt; not equal to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    分类方式 2 ：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    我们按内查询是否被执行多次，将子查询划分为相关(或关联)子查询和不相关(或非关联)子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    子查询从数据表中查询了数据结果，如果这个数据结果只执行一次，然后这个数据结果作为主查询的条
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    件进行执行，那么这样的子查询叫做不相关子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    同样，如果子查询需要执行多次，即采用循环的方式，先从外部查询开始，每次都传入子查询进行查
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    询，然后再将结果反馈给外部，这种嵌套的执行方式就称为相关子查询。
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    2. 单行子查询
  </a>
  
    <nav class="md-nav" aria-label="2. 单行子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2-1" class="md-nav__link">
    2. 1 单行比较操作符
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-2" class="md-nav__link">
    2. 2 代码示例
  </a>
  
    <nav class="md-nav" aria-label="2. 2 代码示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#149" class="md-nav__link">
    题目：查询工资大于 149 号员工工资的员工的信息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job_id-141-salary-143-job_id" class="md-nav__link">
    题目：返回job_id与 141 号员工相同，salary比 143 号员工多的员工姓名，job_id和工资
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#last_namejob_idsalary" class="md-nav__link">
    题目：返回公司工资最少的员工的last_name,job_id和salary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#141-174-manager_iddepartment_idemployee_id" class="md-nav__link">
    题目：查询与 141 号或 174 号员工的manager_id和department_id相同的其他员工的employee_id，
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manager_iddepartment_id" class="md-nav__link">
    manager_id，department_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    实现方式 1 ：不成对比较
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    实现方式 2 ：成对比较
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-3-having" class="md-nav__link">
    2. 3 HAVING 中的子查询
  </a>
  
    <nav class="md-nav" aria-label="2. 3 HAVING 中的子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    首先执行子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#having" class="md-nav__link">
    向主查询中的HAVING 子句返回结果。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#50-id" class="md-nav__link">
    题目：查询最低工资大于 50 号部门最低工资的部门id和其最低工资
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-4-case" class="md-nav__link">
    2. 4 CASE中的子查询
  </a>
  
    <nav class="md-nav" aria-label="2. 4 CASE中的子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case" class="md-nav__link">
    在CASE表达式中使用单列子查询：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employee_idlast_namelocationdepartment_idlocation_id-1800" class="md-nav__link">
    题目：显式员工的employee_id,last_name和location。其中，若员工department_id与location_id为 1800
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#department_idlocationcanadausa" class="md-nav__link">
    的department_id相同，则location为’Canada’，其余则为’USA’。
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-5" class="md-nav__link">
    2. 5 子查询中的空值问题
  </a>
  
    <nav class="md-nav" aria-label="2. 5 子查询中的空值问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    子查询不返回任何行
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-5_1" class="md-nav__link">
    2. 5 非法使用子查询
  </a>
  
    <nav class="md-nav" aria-label="2. 5 非法使用子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    操作符 含义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in" class="md-nav__link">
    IN 等于列表中的 任意一个
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#any" class="md-nav__link">
    ANY 需要和单行比较操作符一起使用，和子查询返回的 某一个 值比较
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all" class="md-nav__link">
    ALL 需要和单行比较操作符一起使用，和子查询返回的 所有 值比较
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#some-anyany" class="md-nav__link">
    SOME 实际上是ANY的别名，作用相同，一般常使用ANY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    多行子查询使用单行比较符
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3. 多行子查询
  </a>
  
    <nav class="md-nav" aria-label="3. 多行子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    也称为集合比较子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    内查询返回多行
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    使用多行比较操作符
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-1" class="md-nav__link">
    3. 1 多行比较操作符
  </a>
  
    <nav class="md-nav" aria-label="3. 1 多行比较操作符">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#any-all" class="md-nav__link">
    体会 ANY 和 ALL 的区别
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-2" class="md-nav__link">
    3. 2 代码示例
  </a>
  
    <nav class="md-nav" aria-label="3. 2 代码示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job_idjob_idit_progjob_id-salary" class="md-nav__link">
    题目：返回其它job_id中比job_id为‘IT_PROG’部门任一工资低的员工的员工号、姓名、job_id 以及salary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job_idjob_idit_progjob_id" class="md-nav__link">
    题目：返回其它job_id中比job_id为‘IT_PROG’部门所有工资都低的员工的员工号、姓名、job_id以及
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#salary" class="md-nav__link">
    salary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    题目：查询平均工资最低的部门id
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-3" class="md-nav__link">
    3. 3 空值问题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4. 相关子查询
  </a>
  
    <nav class="md-nav" aria-label="4. 相关子查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    #方式 1 ：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_3" class="md-nav__link">
    #方式 2 ：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-1" class="md-nav__link">
    4. 1 相关子查询执行流程
  </a>
  
    <nav class="md-nav" aria-label="4. 1 相关子查询执行流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    如果子查询的执行依赖于外部查询，通常情况下都是因为子查询中的表用到了外部的表，并进行了条件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    关联，因此每执行一次外部查询，子查询都要重新计算一次，这样的子查询就称之为关联子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    相关子查询按照一行接一行的顺序执行，主查询的每一行都执行一次子查询。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    说明： 子查询中使用主查询中的列
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-2" class="md-nav__link">
    4. 2 代码示例
  </a>
  
    <nav class="md-nav" aria-label="4. 2 代码示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#last_namesalarydepartment_id" class="md-nav__link">
    题目：查询员工中工资大于本部门平均工资的员工的last_name,salary和其department_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    方式一：相关子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from" class="md-nav__link">
    方式二：在 FROM 中使用子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fromfrom" class="md-nav__link">
    from型的子查询：子查询是作为from的一部分，子查询要用()引起来，并且要给这个子查询取别
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    名， 把它当成一张“临时的虚拟的表”来使用。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#order-by" class="md-nav__link">
    在ORDER BY 中使用子查询：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idsalarydepartment_name" class="md-nav__link">
    题目：查询员工的id,salary,按照department_name 排序
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employeesemployee_idjob_historyemployee_id-2" class="md-nav__link">
    题目：若employees表中employee_id与job_history表中employee_id相同的数目不小于 2 ，输出这些相同
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idemployee_idlast_namejob_id" class="md-nav__link">
    id的员工的employee_id,last_name和其job_id
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-3-exists-not-exists" class="md-nav__link">
    4. 3 EXISTS 与 NOT EXISTS关键字
  </a>
  
    <nav class="md-nav" aria-label="4. 3 EXISTS 与 NOT EXISTS关键字">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exists" class="md-nav__link">
    关联子查询通常也会和 EXISTS操作符一起来使用，用来检查在子查询中是否存在满足条件的行。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    如果在子查询中不存在满足条件的行：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#false" class="md-nav__link">
    条件返回 FALSE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    继续在子查询中查找
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    如果在子查询中存在满足条件的行：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    不在子查询中继续查找
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#true" class="md-nav__link">
    条件返回 TRUE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-existstruefalse" class="md-nav__link">
    NOT EXISTS关键字表示如果不存在某种条件，则返回TRUE，否则返回FALSE。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employee_idlast_namejob_iddepartment_id" class="md-nav__link">
    题目：查询公司管理者的employee_id，last_name，job_id，department_id信息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    方式一：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    方式二：自连接
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    方式三：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#departmentsemployeesdepartment_iddepartment_name" class="md-nav__link">
    题目：查询departments表中，不存在于employees表中的部门的department_id和department_name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-4" class="md-nav__link">
    4. 4 相关更新
  </a>
  
    <nav class="md-nav" aria-label="4. 4 相关更新">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    使用相关子查询依据一个表中的数据更新另一个表的数据。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employeesdepartment_name" class="md-nav__link">
    题目：在employees中增加一个department_name字段，数据为员工对应的部门名称
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-4_1" class="md-nav__link">
    4. 4 相关删除
  </a>
  
    <nav class="md-nav" aria-label="4. 4 相关删除">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    使用相关子查询依据一个表中的数据删除另一个表的数据。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#employeesemp_history" class="md-nav__link">
    题目：删除表employees中，其与emp_history表皆有的数据
  </a>
  
    <nav class="md-nav" aria-label="题目：删除表employees中，其与emp_history表皆有的数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    );
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_4" class="md-nav__link">
    # 1）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_4" class="md-nav__link">
    # 2）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5. 抛一个思考题
  </a>
  
    <nav class="md-nav" aria-label="5. 抛一个思考题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#abel" class="md-nav__link">
    问题： 谁的工资比Abel的高？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    解答：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    问题： 以上两种方式有好坏之分吗？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    解答： 自连接方式好！
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbms" class="md-nav__link">
    题目中可以使用子查询，也可以使用自连接。一般情况建议你使用自连接，因为在许多 DBMS 的处理过
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    程中，对于自连接的处理速度要比子查询快得多。
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    可以这样理解：子查询实际上是通过未知表进行查询后的条件判断，而自连接是通过已知的自身数据表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbms_1" class="md-nav__link">
    进行条件判断，因此在大部分 DBMS 中都对自连接处理进行了优化。
  </a>
  
    <nav class="md-nav" aria-label="进行条件判断，因此在大部分 DBMS 中都对自连接处理进行了优化。">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_5" class="md-nav__link">
    #方式 1 ：自连接
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_5" class="md-nav__link">
    #方式 2 ：子查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  




<h1 id="09-_">第 09 章_子查询<a class="headerlink" href="#09-_" title="Permanent link">&para;</a></h1>
<h4 id="-">讲师：尚硅谷-宋红康（江湖人称：康师傅）<a class="headerlink" href="#-" title="Permanent link">&para;</a></h4>
<h4 id="httpwwwatguigucom">官网： http://www.atguigu.com<a class="headerlink" href="#httpwwwatguigucom" title="Permanent link">&para;</a></h4>
<h4 id="mysql-4-1">子查询指一个查询语句嵌套在另一个查询语句内部的查询，这个特性从MySQL 4. 1 开始引入。<a class="headerlink" href="#mysql-4-1" title="Permanent link">&para;</a></h4>
<h4 id="sql-select">SQL 中子查询的使用大大增强了 SELECT 查询的能力，因为很多时候查询需要从结果集中获取数据，或者<a class="headerlink" href="#sql-select" title="Permanent link">&para;</a></h4>
<h4 id="_1">需要从同一个表中先计算得出一个数据结果，然后与这个数据结果（可能是某个标量，也可能是某个集<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<h4 id="_2">合）进行比较。<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<h2 id="1">1. 需求分析与问题解决<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<h2 id="1-1">1. 1 实际问题<a class="headerlink" href="#1-1" title="Permanent link">&para;</a></h2>
<h4 id="_3">现有解决方式：<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<h5 id="_4">#方式一：<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>SELECT salary
FROM employees
WHERE last_name = &#39;Abel&#39;;
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT last_name,salary
FROM employees
WHERE salary &gt; 11000 ;
</code></pre></div>
<h5 id="_5">#方式二：自连接<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>SELECT e2.last_name,e2.salary
FROM employees e1,employees e
WHERE e1.last_name = &#39;Abel&#39;
AND e1.`salary` &lt; e2.`salary`
</code></pre></div>
<h3 id="1-2">1. 2 子查询的基本使用<a class="headerlink" href="#1-2" title="Permanent link">&para;</a></h3>
<h4 id="_6">子查询的基本语法结构：<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<h4 id="_7">子查询（内查询）在主查询之前一次执行完成。<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<h4 id="_8">子查询的结果被主查询（外查询）使用 。<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<h4 id="_9">注意事项<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<h4 id="_10">子查询要包含在括号内<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<h4 id="_11">将子查询放在比较条件的右侧<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<h4 id="_12">单行操作符对应单行子查询，多行操作符对应多行子查询<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<h3 id="1-3">1. 3 子查询的分类<a class="headerlink" href="#1-3" title="Permanent link">&para;</a></h3>
<h4 id="1_1">分类方式 1 ：<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h4>
<h4 id="_13">我们按内查询的结果返回一条还是多条记录，将子查询分为单行子查询、多行子查询。<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<h4 id="_14">单行子查询<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<h4 id="_15">多行子查询<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<h5 id="_16">#方式三：子查询<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>SELECT last_name,salary
FROM employees
WHERE salary &gt; (
SELECT salary
FROM employees
WHERE last_name = &#39;Abel&#39;
);
</code></pre></div>
<h4 id="_17">操作符 含义<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<h4 id="equal-to">= equal to<a class="headerlink" href="#equal-to" title="Permanent link">&para;</a></h4>
<h4 id="greater-than">&gt; greater than<a class="headerlink" href="#greater-than" title="Permanent link">&para;</a></h4>
<h4 id="greater-than-or-equal-to">&gt;= greater than or equal to<a class="headerlink" href="#greater-than-or-equal-to" title="Permanent link">&para;</a></h4>
<h4 id="less-than">&lt; less than<a class="headerlink" href="#less-than" title="Permanent link">&para;</a></h4>
<h4 id="less-than-or-equal-to">&lt;= less than or equal to<a class="headerlink" href="#less-than-or-equal-to" title="Permanent link">&para;</a></h4>
<h4 id="not-equal-to">&lt;&gt; not equal to<a class="headerlink" href="#not-equal-to" title="Permanent link">&para;</a></h4>
<h4 id="2">分类方式 2 ：<a class="headerlink" href="#2" title="Permanent link">&para;</a></h4>
<h4 id="_18">我们按内查询是否被执行多次，将子查询划分为相关(或关联)子查询和不相关(或非关联)子查询。<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<h4 id="_19">子查询从数据表中查询了数据结果，如果这个数据结果只执行一次，然后这个数据结果作为主查询的条<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h4>
<h4 id="_20">件进行执行，那么这样的子查询叫做不相关子查询。<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h4>
<h4 id="_21">同样，如果子查询需要执行多次，即采用循环的方式，先从外部查询开始，每次都传入子查询进行查<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<h4 id="_22">询，然后再将结果反馈给外部，这种嵌套的执行方式就称为相关子查询。<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<h2 id="2_1">2. 单行子查询<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h2>
<h3 id="2-1">2. 1 单行比较操作符<a class="headerlink" href="#2-1" title="Permanent link">&para;</a></h3>
<h3 id="2-2">2. 2 代码示例<a class="headerlink" href="#2-2" title="Permanent link">&para;</a></h3>
<h4 id="149">题目：查询工资大于 149 号员工工资的员工的信息<a class="headerlink" href="#149" title="Permanent link">&para;</a></h4>
<h4 id="job_id-141-salary-143-job_id">题目：返回job_id与 141 号员工相同，salary比 143 号员工多的员工姓名，job_id和工资<a class="headerlink" href="#job_id-141-salary-143-job_id" title="Permanent link">&para;</a></h4>
<h4 id="last_namejob_idsalary">题目：返回公司工资最少的员工的last_name,job_id和salary<a class="headerlink" href="#last_namejob_idsalary" title="Permanent link">&para;</a></h4>
<h4 id="141-174-manager_iddepartment_idemployee_id">题目：查询与 141 号或 174 号员工的manager_id和department_id相同的其他员工的employee_id，<a class="headerlink" href="#141-174-manager_iddepartment_idemployee_id" title="Permanent link">&para;</a></h4>
<h4 id="manager_iddepartment_id">manager_id，department_id<a class="headerlink" href="#manager_iddepartment_id" title="Permanent link">&para;</a></h4>
<h4 id="1_2">实现方式 1 ：不成对比较<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h4>
<h4 id="2_2">实现方式 2 ：成对比较<a class="headerlink" href="#2_2" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>SELECT last_name, job_id, salary
FROM employees
WHERE job_id =
(SELECT job_id
FROM employees
WHERE employee_id = 141 )
AND salary &gt;
(SELECT salary
FROM employees
WHERE employee_id = 143 );
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT last_name, job_id, salary
FROM employees
WHERE salary =
(SELECT MIN(salary)
FROM employees);
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT employee_id, manager_id, department_id
FROM employees
WHERE manager_id IN
(SELECT manager_id
FROM employees
WHERE employee_id IN (174,141))
AND department_id IN
(SELECT department_id
FROM employees
WHERE employee_id IN (174,141))
AND employee_id NOT IN(174,141);
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT employee_id, manager_id, department_id
FROM employees
WHERE (manager_id, department_id) IN
(SELECT manager_id, department_id
FROM employees
WHERE employee_id IN (141,174))
AND employee_id NOT IN (141,174);
</code></pre></div>
<h3 id="2-3-having">2. 3 HAVING 中的子查询<a class="headerlink" href="#2-3-having" title="Permanent link">&para;</a></h3>
<h4 id="_23">首先执行子查询。<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<h4 id="having">向主查询中的HAVING 子句返回结果。<a class="headerlink" href="#having" title="Permanent link">&para;</a></h4>
<h4 id="50-id">题目：查询最低工资大于 50 号部门最低工资的部门id和其最低工资<a class="headerlink" href="#50-id" title="Permanent link">&para;</a></h4>
<h3 id="2-4-case">2. 4 CASE中的子查询<a class="headerlink" href="#2-4-case" title="Permanent link">&para;</a></h3>
<h4 id="case">在CASE表达式中使用单列子查询：<a class="headerlink" href="#case" title="Permanent link">&para;</a></h4>
<h4 id="employee_idlast_namelocationdepartment_idlocation_id-1800">题目：显式员工的employee_id,last_name和location。其中，若员工department_id与location_id为 1800<a class="headerlink" href="#employee_idlast_namelocationdepartment_idlocation_id-1800" title="Permanent link">&para;</a></h4>
<h4 id="department_idlocationcanadausa">的department_id相同，则location为’Canada’，其余则为’USA’。<a class="headerlink" href="#department_idlocationcanadausa" title="Permanent link">&para;</a></h4>
<h3 id="2-5">2. 5 子查询中的空值问题<a class="headerlink" href="#2-5" title="Permanent link">&para;</a></h3>
<h4 id="_24">子查询不返回任何行<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h4>
<h3 id="2-5_1">2. 5 非法使用子查询<a class="headerlink" href="#2-5_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>SELECT department_id, MIN(salary)
FROM employees
GROUP BY department_id
HAVING MIN(salary) &gt;
(SELECT MIN(salary)
FROM employees
WHERE department_id = 50 );
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT employee_id, last_name,
(CASE department_id
WHEN
(SELECT department_id FROM departments
WHERE location_id = 1800)
THEN &#39;Canada&#39; ELSE &#39;USA&#39; END) location
FROM employees;
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT last_name, job_id
FROM employees
WHERE job_id =
(SELECT job_id
FROM employees
WHERE last_name = &#39;Haas&#39;);
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT employee_id, last_name
FROM employees
WHERE salary =
(SELECT MIN(salary)
FROM employees
GROUP BY department_id);
</code></pre></div>
<h4 id="_25">操作符 含义<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<h4 id="in">IN 等于列表中的 任意一个<a class="headerlink" href="#in" title="Permanent link">&para;</a></h4>
<h4 id="any">ANY 需要和单行比较操作符一起使用，和子查询返回的 某一个 值比较<a class="headerlink" href="#any" title="Permanent link">&para;</a></h4>
<h4 id="all">ALL 需要和单行比较操作符一起使用，和子查询返回的 所有 值比较<a class="headerlink" href="#all" title="Permanent link">&para;</a></h4>
<h4 id="some-anyany">SOME 实际上是ANY的别名，作用相同，一般常使用ANY<a class="headerlink" href="#some-anyany" title="Permanent link">&para;</a></h4>
<h4 id="_26">多行子查询使用单行比较符<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h4>
<h2 id="3">3. 多行子查询<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h4 id="_27">也称为集合比较子查询<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h4>
<h4 id="_28">内查询返回多行<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<h4 id="_29">使用多行比较操作符<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h4>
<h3 id="3-1">3. 1 多行比较操作符<a class="headerlink" href="#3-1" title="Permanent link">&para;</a></h3>
<h4 id="any-all">体会 ANY 和 ALL 的区别<a class="headerlink" href="#any-all" title="Permanent link">&para;</a></h4>
<h3 id="3-2">3. 2 代码示例<a class="headerlink" href="#3-2" title="Permanent link">&para;</a></h3>
<h4 id="job_idjob_idit_progjob_id-salary">题目：返回其它job_id中比job_id为‘IT_PROG’部门任一工资低的员工的员工号、姓名、job_id 以及salary<a class="headerlink" href="#job_idjob_idit_progjob_id-salary" title="Permanent link">&para;</a></h4>
<h4 id="job_idjob_idit_progjob_id">题目：返回其它job_id中比job_id为‘IT_PROG’部门所有工资都低的员工的员工号、姓名、job_id以及<a class="headerlink" href="#job_idjob_idit_progjob_id" title="Permanent link">&para;</a></h4>
<h4 id="salary">salary<a class="headerlink" href="#salary" title="Permanent link">&para;</a></h4>
<h4 id="id">题目：查询平均工资最低的部门id<a class="headerlink" href="#id" title="Permanent link">&para;</a></h4>
<h3 id="3-3">3. 3 空值问题<a class="headerlink" href="#3-3" title="Permanent link">&para;</a></h3>
<h2 id="4">4. 相关子查询<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<h5 id="1_3">#方式 1 ：<a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>SELECT department_id
FROM employees
GROUP BY department_id
HAVING AVG(salary) = (
SELECT MIN(avg_sal)
FROM (
SELECT AVG(salary) avg_sal
FROM employees
GROUP BY department_id
) dept_avg_sal
)
</code></pre></div>
<h5 id="2_3">#方式 2 ：<a class="headerlink" href="#2_3" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>SELECT department_id
FROM employees
GROUP BY department_id
HAVING AVG(salary) &lt;= ALL (
SELECT AVG(salary) avg_sal
FROM employees
GROUP BY department_id
)
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT last_name
FROM employees
WHERE employee_id NOT IN (
SELECT manager_id
FROM employees
);
</code></pre></div>
<h3 id="4-1">4. 1 相关子查询执行流程<a class="headerlink" href="#4-1" title="Permanent link">&para;</a></h3>
<h4 id="_30">如果子查询的执行依赖于外部查询，通常情况下都是因为子查询中的表用到了外部的表，并进行了条件<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h4>
<h4 id="_31">关联，因此每执行一次外部查询，子查询都要重新计算一次，这样的子查询就称之为关联子查询。<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<h4 id="_32">相关子查询按照一行接一行的顺序执行，主查询的每一行都执行一次子查询。<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<h4 id="_33">说明： 子查询中使用主查询中的列<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<h3 id="4-2">4. 2 代码示例<a class="headerlink" href="#4-2" title="Permanent link">&para;</a></h3>
<h4 id="last_namesalarydepartment_id">题目：查询员工中工资大于本部门平均工资的员工的last_name,salary和其department_id<a class="headerlink" href="#last_namesalarydepartment_id" title="Permanent link">&para;</a></h4>
<h4 id="_34">方式一：相关子查询<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<h4 id="from">方式二：在 FROM 中使用子查询<a class="headerlink" href="#from" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>SELECT last_name,salary,e1.department_id
FROM employees e1,(SELECT department_id,AVG(salary) dept_avg_sal FROM employees GROUP
BY department_id) e
WHERE e1.`department_id` = e2.department_id
AND e2.dept_avg_sal &lt; e1.`salary`;
</code></pre></div>
<h4 id="fromfrom">from型的子查询：子查询是作为from的一部分，子查询要用()引起来，并且要给这个子查询取别<a class="headerlink" href="#fromfrom" title="Permanent link">&para;</a></h4>
<h4 id="_35">名， 把它当成一张“临时的虚拟的表”来使用。<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<h4 id="order-by">在ORDER BY 中使用子查询：<a class="headerlink" href="#order-by" title="Permanent link">&para;</a></h4>
<h4 id="idsalarydepartment_name">题目：查询员工的id,salary,按照department_name 排序<a class="headerlink" href="#idsalarydepartment_name" title="Permanent link">&para;</a></h4>
<h4 id="employeesemployee_idjob_historyemployee_id-2">题目：若employees表中employee_id与job_history表中employee_id相同的数目不小于 2 ，输出这些相同<a class="headerlink" href="#employeesemployee_idjob_historyemployee_id-2" title="Permanent link">&para;</a></h4>
<h4 id="idemployee_idlast_namejob_id">id的员工的employee_id,last_name和其job_id<a class="headerlink" href="#idemployee_idlast_namejob_id" title="Permanent link">&para;</a></h4>
<h3 id="4-3-exists-not-exists">4. 3 EXISTS 与 NOT EXISTS关键字<a class="headerlink" href="#4-3-exists-not-exists" title="Permanent link">&para;</a></h3>
<h4 id="exists">关联子查询通常也会和 EXISTS操作符一起来使用，用来检查在子查询中是否存在满足条件的行。<a class="headerlink" href="#exists" title="Permanent link">&para;</a></h4>
<h4 id="_36">如果在子查询中不存在满足条件的行：<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<h4 id="false">条件返回 FALSE<a class="headerlink" href="#false" title="Permanent link">&para;</a></h4>
<h4 id="_37">继续在子查询中查找<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h4>
<h4 id="_38">如果在子查询中存在满足条件的行：<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<h4 id="_39">不在子查询中继续查找<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<h4 id="true">条件返回 TRUE<a class="headerlink" href="#true" title="Permanent link">&para;</a></h4>
<h4 id="not-existstruefalse">NOT EXISTS关键字表示如果不存在某种条件，则返回TRUE，否则返回FALSE。<a class="headerlink" href="#not-existstruefalse" title="Permanent link">&para;</a></h4>
<h4 id="employee_idlast_namejob_iddepartment_id">题目：查询公司管理者的employee_id，last_name，job_id，department_id信息<a class="headerlink" href="#employee_idlast_namejob_iddepartment_id" title="Permanent link">&para;</a></h4>
<h4 id="_40">方式一：<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<h4 id="_41">方式二：自连接<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h4>
<h4 id="_42">方式三：<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>SELECT employee_id,salary
FROM employees e
ORDER BY (
SELECT department_name
FROM departments d
WHERE e.`department_id` = d.`department_id`
);
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT e.employee_id, last_name,e.job_id
FROM employees e
WHERE 2 &lt;= (SELECT COUNT(*)
FROM job_history
WHERE employee_id = e.employee_id);
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT employee_id, last_name, job_id, department_id
FROM employees e
WHERE EXISTS ( SELECT *
FROM employees e
WHERE e2.manager_id =
e1.employee_id);
</code></pre></div>
<div class="highlight"><pre><span></span><code>SELECT DISTINCT e1.employee_id, e1.last_name, e1.job_id, e1.department_id
FROM employees e1 JOIN employees e
WHERE e1.employee_id = e2.manager_id;
</code></pre></div>
<h4 id="departmentsemployeesdepartment_iddepartment_name">题目：查询departments表中，不存在于employees表中的部门的department_id和department_name<a class="headerlink" href="#departmentsemployeesdepartment_iddepartment_name" title="Permanent link">&para;</a></h4>
<h3 id="4-4">4. 4 相关更新<a class="headerlink" href="#4-4" title="Permanent link">&para;</a></h3>
<h4 id="_43">使用相关子查询依据一个表中的数据更新另一个表的数据。<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h4>
<h4 id="employeesdepartment_name">题目：在employees中增加一个department_name字段，数据为员工对应的部门名称<a class="headerlink" href="#employeesdepartment_name" title="Permanent link">&para;</a></h4>
<h3 id="4-4_1">4. 4 相关删除<a class="headerlink" href="#4-4_1" title="Permanent link">&para;</a></h3>
<h4 id="_44">使用相关子查询依据一个表中的数据删除另一个表的数据。<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<h4 id="employeesemp_history">题目：删除表employees中，其与emp_history表皆有的数据<a class="headerlink" href="#employeesemp_history" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>SELECT employee_id,last_name,job_id,department_id
FROM employees
WHERE employee_id IN (
SELECT DISTINCT manager_id
FROM employees
</code></pre></div>
<h5 id="_45">);<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>SELECT department_id, department_name
FROM departments d
WHERE NOT EXISTS (SELECT &#39;X&#39;
FROM employees
WHERE department_id = d.department_id);
</code></pre></div>
<div class="highlight"><pre><span></span><code>UPDATE table1 alias
SET column = (SELECT expression
FROM table2 alias
WHERE alias1.column = alias2.column);
</code></pre></div>
<h5 id="1_4"># 1）<a class="headerlink" href="#1_4" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>ALTER TABLE employees
ADD(department_name VARCHAR2( 14 ));
</code></pre></div>
<h5 id="2_4"># 2）<a class="headerlink" href="#2_4" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>UPDATE employees e
SET department_name = (SELECT department_name
FROM departments d
WHERE e.department_id = d.department_id);
</code></pre></div>
<div class="highlight"><pre><span></span><code>DELETE FROM table1 alias
WHERE column operator (SELECT expression
FROM table2 alias
WHERE alias1.column = alias2.column);
</code></pre></div>
<div class="highlight"><pre><span></span><code>DELETE FROM employees e
WHERE employee_id in
(SELECT employee_id
FROM emp_history
WHERE employee_id = e.employee_id);
</code></pre></div>
<h2 id="5">5. 抛一个思考题<a class="headerlink" href="#5" title="Permanent link">&para;</a></h2>
<h4 id="abel">问题： 谁的工资比Abel的高？<a class="headerlink" href="#abel" title="Permanent link">&para;</a></h4>
<h4 id="_46">解答：<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<h4 id="_47">问题： 以上两种方式有好坏之分吗？<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h4>
<h4 id="_48">解答： 自连接方式好！<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h4>
<h4 id="dbms">题目中可以使用子查询，也可以使用自连接。一般情况建议你使用自连接，因为在许多 DBMS 的处理过<a class="headerlink" href="#dbms" title="Permanent link">&para;</a></h4>
<h4 id="_49">程中，对于自连接的处理速度要比子查询快得多。<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<h4 id="_50">可以这样理解：子查询实际上是通过未知表进行查询后的条件判断，而自连接是通过已知的自身数据表<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h4>
<h4 id="dbms_1">进行条件判断，因此在大部分 DBMS 中都对自连接处理进行了优化。<a class="headerlink" href="#dbms_1" title="Permanent link">&para;</a></h4>
<h5 id="1_5">#方式 1 ：自连接<a class="headerlink" href="#1_5" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>SELECT e2.last_name,e2.salary
FROM employees e1,employees e
WHERE e1.last_name = &#39;Abel&#39;
AND e1.`salary` &lt; e2.`salary`
</code></pre></div>
<h5 id="2_5">#方式 2 ：子查询<a class="headerlink" href="#2_5" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code>SELECT last_name,salary
FROM employees
WHERE salary &gt; (
SELECT salary
FROM employees
WHERE last_name = &#39;Abel&#39;
);
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "header.autohide"], "search": "../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.2a6f1dda.min.js"></script>
      
        <script src="../../../../../mkdocs/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>